# OrionLabs 開發環境標準化方案

## 🎯 建議架構：混合開發模式

### 方案 A: 推薦 - 靈活混合模式
```bash
# 快速開發 (日常使用)
yarn dev:fast        # Vite前端 + Python後端 (最快啟動)

# Docker開發 (測試一致性)
yarn dev:docker      # Vite前端 + Docker後端 (環境一致)

# 完整模擬 (部署前驗證)
yarn dev:production  # Docker前端 + Docker後端 (完全一致)
```

### 方案 B: 完全Docker化
```bash
# 全Docker開發
yarn dev              # Docker前端 + Docker後端
yarn dev:watch        # 帶檔案監控的Docker開發
```

## 🚀 實作計劃

### 第一階段：增強現有開發流程
1. **保留現有 `yarn dev`** - 快速開發用
2. **新增 `yarn dev:docker`** - Docker後端測試
3. **新增 Docker Compose 開發版**

### 第二階段：完整Docker化 (可選)
1. **前端Docker化** - 開發用容器
2. **統一環境變數管理**
3. **檔案同步優化**

## 📋 具體實作

### 1. 更新 package.json 腳本
```json
{
  "scripts": {
    "dev": "node predev.js && vite --mode development",
    "dev:fast": "bash scripts/start-local-dev.sh",
    "dev:docker": "docker-compose -f docker-compose.dev.yml up backend && vite",
    "dev:full": "docker-compose -f docker-compose.dev.yml up",
    "dev:production": "docker-compose -f docker-compose.prod.yml up"
  }
}
```

### 2. 建立開發用 Docker Compose
```yaml
# docker-compose.dev.yml
version: '3.8'
services:
  backend:
    build: 
      context: ../Orionlabs-backend
      dockerfile: Dockerfile.dev
    ports:
      - "8000:8000"
    volumes:
      - ../Orionlabs-backend:/app
    environment:
      - DEBUG=True
      - DATABASE_URL=mysql+pymysql://admin:CcBb0932173427!@161.33.209.198:3306/orionlabs
```

## ✅ 優勢分析

### 混合模式優勢
- ⚡ **快速啟動**: 保留 Vite + Python 的快速開發
- 🔒 **環境驗證**: Docker 模式確保部署一致性
- 🎯 **靈活選擇**: 根據需求選擇開發模式
- 🐛 **除錯友善**: 本地模式易除錯，Docker模式驗證

### 環境一致性保證
- 📦 **相同依賴**: requirements.txt 確保Python套件一致
- 🐳 **相同容器**: 開發/生產使用相同 Docker 映像
- 🔧 **相同配置**: 環境變數統一管理
- 🌐 **相同網路**: Docker 網路模擬生產環境

## 🔧 實作優先級

### 立即實作 (本週)
1. ✅ 建立 `docker-compose.dev.yml`
2. ✅ 新增 `yarn dev:docker` 腳本
3. ✅ 測試混合開發流程

### 短期實作 (下週)
1. 🔄 建立後端 `Dockerfile.dev`
2. 🔄 優化開發容器啟動速度
3. 🔄 整合 VS Code Docker 擴充

### 長期優化 (下月)
1. 📊 效能監控整合
2. 🧪 自動化測試環境
3. 🚀 CI/CD 流程優化

## 🎯 結論

建議採用**混合開發模式**：
- 日常開發：保持 `yarn dev` (Vite + Python)
- 測試驗證：使用 `yarn dev:docker` (Vite + Docker)
- 部署前：使用 `yarn dev:production` (完整Docker)

這樣既保持開發效率，又確保環境一致性！
