/* 管理後台深色模式修復 */
/* Admin Dashboard Dark Mode Fix */

/* ====================================
   管理後台深色模式專用樣式
   ====================================*/

/* 深色模式變數 */
[data-theme="dark"] {
  --admin-bg-primary: #1a1d23;
  --admin-bg-secondary: #2c3340;
  --admin-bg-tertiary: #3b4252;
  --admin-text-primary: #e5e7eb;
  --admin-text-secondary: #9ca3af;
  --admin-text-muted: #6b7280;
  --admin-border-color: #374151;
  --admin-hover-bg: #374151;
  --admin-card-bg: #2c3340;
  --admin-sidebar-bg: #1f2937;
  --admin-navbar-bg: #111827;
  --admin-input-bg: #374151;
  --admin-input-border: #4b5563;
  --admin-table-stripe: #374151;
  --admin-modal-bg: #1f2937;
  --admin-success-bg: #065f46;
  --admin-danger-bg: #7f1d1d;
  --admin-warning-bg: #92400e;
  --admin-info-bg: #1e40af;
}

/* 管理頁面整體背景 */
[data-theme="dark"] .admin-page {
  background-color: var(--admin-bg-primary) !important;
  color: var(--admin-text-primary) !important;
  min-height: 100vh;
}

/* 導航欄覆蓋 Bootstrap 類別 */
[data-theme="dark"] .navbar.navbar-dark.bg-dark {
  background-color: var(--admin-navbar-bg) !important;
  border-bottom: 1px solid var(--admin-border-color);
}

[data-theme="dark"] .navbar-brand {
  color: var(--admin-text-primary) !important;
}

/* 側邊欄覆蓋 Bootstrap 類別 */
[data-theme="dark"] .sidebar.bg-light {
  background-color: var(--admin-sidebar-bg) !important;
  border-right: 1px solid var(--admin-border-color);
}

[data-theme="dark"] .sidebar .nav-link {
  color: var(--admin-text-secondary) !important;
  border-radius: 0.375rem;
  margin-bottom: 0.25rem;
  transition: all 0.2s ease;
}

[data-theme="dark"] .sidebar .nav-link:hover {
  background-color: var(--admin-hover-bg) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .sidebar .nav-link.active {
  background-color: var(--color-primary) !important;
  color: white !important;
}

/* 卡片元件 */
[data-theme="dark"] .card {
  background-color: var(--admin-card-bg) !important;
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .card-header {
  background-color: var(--admin-bg-tertiary) !important;
  border-bottom-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .card-body {
  background-color: var(--admin-card-bg) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .card-footer {
  background-color: var(--admin-bg-tertiary) !important;
  border-top-color: var(--admin-border-color) !important;
}

/* 表格樣式 */
[data-theme="dark"] .table {
  --bs-table-bg: var(--admin-card-bg);
  --bs-table-color: var(--admin-text-primary);
  --bs-table-border-color: var(--admin-border-color);
  --bs-table-striped-bg: var(--admin-table-stripe);
  --bs-table-hover-bg: var(--admin-hover-bg);
}

[data-theme="dark"] .table thead th {
  background-color: var(--admin-bg-tertiary) !important;
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .table tbody td {
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

/* 表單元件 */
[data-theme="dark"] .form-control {
  background-color: var(--admin-input-bg) !important;
  border-color: var(--admin-input-border) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .form-control:focus {
  background-color: var(--admin-input-bg) !important;
  border-color: var(--color-primary) !important;
  color: var(--admin-text-primary) !important;
  box-shadow: 0 0 0 0.2rem rgba(0, 47, 167, 0.25) !important;
}

[data-theme="dark"] .form-control::placeholder {
  color: var(--admin-text-muted) !important;
}

[data-theme="dark"] .form-select {
  background-color: var(--admin-input-bg) !important;
  border-color: var(--admin-input-border) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .form-label {
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .form-text {
  color: var(--admin-text-muted) !important;
}

/* 按鈕樣式 */
[data-theme="dark"] .btn-outline-light {
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .btn-outline-light:hover {
  background-color: var(--admin-hover-bg) !important;
  border-color: var(--admin-text-primary) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .btn-secondary {
  background-color: var(--admin-bg-tertiary) !important;
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .btn-secondary:hover {
  background-color: var(--admin-hover-bg) !important;
  border-color: var(--admin-text-primary) !important;
}

/* Modal 彈窗 */
[data-theme="dark"] .modal-content {
  background-color: var(--admin-modal-bg) !important;
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .modal-header {
  border-bottom-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .modal-footer {
  border-top-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .modal-title {
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .btn-close {
  filter: invert(1) grayscale(100%) brightness(200%);
}

/* 分頁元件 */
[data-theme="dark"] .pagination .page-link {
  background-color: var(--admin-card-bg) !important;
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .pagination .page-link:hover {
  background-color: var(--admin-hover-bg) !important;
  border-color: var(--admin-text-primary) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .pagination .page-item.active .page-link {
  background-color: var(--color-primary) !important;
  border-color: var(--color-primary) !important;
  color: white !important;
}

[data-theme="dark"] .pagination .page-item.disabled .page-link {
  background-color: var(--admin-bg-tertiary) !important;
  border-color: var(--admin-border-color) !important;
  color: var(--admin-text-muted) !important;
}

/* Badge 徽章 */
[data-theme="dark"] .badge.bg-success {
  background-color: var(--admin-success-bg) !important;
}

[data-theme="dark"] .badge.bg-warning {
  background-color: var(--admin-warning-bg) !important;
}

[data-theme="dark"] .badge.bg-danger {
  background-color: var(--admin-danger-bg) !important;
}

[data-theme="dark"] .badge.bg-info {
  background-color: var(--admin-info-bg) !important;
}

[data-theme="dark"] .badge.bg-secondary {
  background-color: var(--admin-bg-tertiary) !important;
}

/* 警告框 */
[data-theme="dark"] .alert {
  border-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .alert-success {
  background-color: rgba(6, 95, 70, 0.2) !important;
  border-color: var(--admin-success-bg) !important;
  color: #10b981 !important;
}

[data-theme="dark"] .alert-danger {
  background-color: rgba(127, 29, 29, 0.2) !important;
  border-color: var(--admin-danger-bg) !important;
  color: #ef4444 !important;
}

[data-theme="dark"] .alert-warning {
  background-color: rgba(146, 64, 14, 0.2) !important;
  border-color: var(--admin-warning-bg) !important;
  color: #f59e0b !important;
}

[data-theme="dark"] .alert-info {
  background-color: rgba(30, 64, 175, 0.2) !important;
  border-color: var(--admin-info-bg) !important;
  color: #3b82f6 !important;
}

/* 下拉菜單 */
[data-theme="dark"] .dropdown-menu {
  background-color: var(--admin-modal-bg) !important;
  border-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .dropdown-item {
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .dropdown-item:hover {
  background-color: var(--admin-hover-bg) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .dropdown-divider {
  border-color: var(--admin-border-color) !important;
}

/* 工具提示 */
[data-theme="dark"] .tooltip .tooltip-inner {
  background-color: var(--admin-bg-tertiary) !important;
  color: var(--admin-text-primary) !important;
}

/* 載入中動畫 */
[data-theme="dark"] .spinner-border {
  color: var(--color-primary) !important;
}

/* 圖標顏色 */
[data-theme="dark"] .bi {
  color: inherit;
}

/* 文字顏色工具類別覆蓋 */
[data-theme="dark"] .text-muted {
  color: var(--admin-text-muted) !important;
}

[data-theme="dark"] .text-secondary {
  color: var(--admin-text-secondary) !important;
}

[data-theme="dark"] .text-dark {
  color: var(--admin-text-primary) !important;
}

/* 邊框工具類別 */
[data-theme="dark"] .border {
  border-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .border-top {
  border-top-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .border-bottom {
  border-bottom-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .border-start {
  border-left-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .border-end {
  border-right-color: var(--admin-border-color) !important;
}

/* 背景工具類別覆蓋 */
[data-theme="dark"] .bg-white {
  background-color: var(--admin-card-bg) !important;
}

[data-theme="dark"] .bg-light {
  background-color: var(--admin-bg-secondary) !important;
}

/* Tab 標籤頁 */
[data-theme="dark"] .nav-tabs {
  border-bottom-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .nav-tabs .nav-link {
  color: var(--admin-text-secondary) !important;
  border-color: transparent !important;
}

[data-theme="dark"] .nav-tabs .nav-link:hover {
  border-color: var(--admin-border-color) var(--admin-border-color) var(--admin-border-color) !important;
  background-color: var(--admin-hover-bg) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .nav-tabs .nav-link.active {
  background-color: var(--admin-card-bg) !important;
  border-color: var(--admin-border-color) var(--admin-border-color) var(--admin-card-bg) !important;
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .tab-content {
  background-color: var(--admin-card-bg) !important;
  border: 1px solid var(--admin-border-color) !important;
  border-top: none !important;
}

/* 統計數據卡片 */
[data-theme="dark"] .stats-card {
  background: linear-gradient(135deg, var(--admin-card-bg) 0%, var(--admin-bg-tertiary) 100%) !important;
  border-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .stats-card .card-title {
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .stats-card .card-text {
  color: var(--admin-text-secondary) !important;
}

/* 表格操作按鈕 */
[data-theme="dark"] .btn-sm {
  border-color: var(--admin-border-color) !important;
}

[data-theme="dark"] .btn-outline-primary {
  border-color: var(--color-primary) !important;
  color: var(--color-primary) !important;
}

[data-theme="dark"] .btn-outline-primary:hover {
  background-color: var(--color-primary) !important;
  border-color: var(--color-primary) !important;
  color: white !important;
}

[data-theme="dark"] .btn-outline-warning {
  border-color: #f59e0b !important;
  color: #f59e0b !important;
}

[data-theme="dark"] .btn-outline-warning:hover {
  background-color: #f59e0b !important;
  border-color: #f59e0b !important;
  color: var(--admin-navbar-bg) !important;
}

[data-theme="dark"] .btn-outline-danger {
  border-color: #ef4444 !important;
  color: #ef4444 !important;
}

[data-theme="dark"] .btn-outline-danger:hover {
  background-color: #ef4444 !important;
  border-color: #ef4444 !important;
  color: white !important;
}

/* 響應式設計 */
@media (max-width: 768px) {
  [data-theme="dark"] .sidebar {
    background-color: var(--admin-sidebar-bg) !important;
  }

  [data-theme="dark"] .container-fluid {
    background-color: var(--admin-bg-primary) !important;
  }
}

/* 輔助功能優化 */
[data-theme="dark"] :focus {
  outline: 2px solid var(--color-primary) !important;
  outline-offset: 2px !important;
}

/* 動畫優化 */
[data-theme="dark"] * {
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease !important;
}

/* 確保所有文字都有足夠的對比度 */
[data-theme="dark"] .admin-page * {
  color: inherit;
}

[data-theme="dark"] .admin-page h1,
[data-theme="dark"] .admin-page h2,
[data-theme="dark"] .admin-page h3,
[data-theme="dark"] .admin-page h4,
[data-theme="dark"] .admin-page h5,
[data-theme="dark"] .admin-page h6 {
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .admin-page p,
[data-theme="dark"] .admin-page span,
[data-theme="dark"] .admin-page div {
  color: var(--admin-text-primary);
}

/* 修復可能的文字顏色繼承問題 */
[data-theme="dark"] .table td,
[data-theme="dark"] .table th {
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .card-title,
[data-theme="dark"] .card-subtitle {
  color: var(--admin-text-primary) !important;
}

[data-theme="dark"] .modal-body {
  color: var(--admin-text-primary) !important;
}

/* 確保所有輸入框文字可見 */
[data-theme="dark"] input,
[data-theme="dark"] textarea,
[data-theme="dark"] select {
  color: var(--admin-text-primary) !important;
  background-color: var(--admin-input-bg) !important;
}
